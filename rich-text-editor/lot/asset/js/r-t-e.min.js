/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.4
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function $e(e){return n[r+"Element"](e)}function xe(e){return e.toLowerCase()}function me(e){return"string"==typeof e}function ye(e){return 3===e.nodeType}function ke(e){return"undefined"==typeof e}function Me(e){return"function"==typeof e}function ze(e,n){return new RegExp(e,n)}function Ce(e,n){return n=n||"[\\w-:]+",e[M](ze("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[M](/ +/g," ")[M](/^\s*|\s*$/g,"")}function Se(e,n){return e.join(n||"")}function Ne(e,n,t){return e[l](n,t,ce)}function Re(e,n,t){return e[v](n,t)}function Ee(e){var o,t=$e(le),i=n[r+"DocumentFragment"](),f=[],u=[],a="";if(me(e)){for(t[s]=e;o=t[d];)u[R](xe(o[x]||"")),f[R](i[g](o));return[f,i,u,e]}for(u in e)(o=e[u])&&(me(o)?(a+=o,t[s]=o,o=t[d]):a+=o[c],f[R](xe(o[x]||"")),i[g](o));return[e,i,f,a]}var we,be,i="__instance__",r="create",f="style",u="minHeight",o="HTML",s="inner"+o,c="outer"+o,a="className",o="EventListener",l="add"+o,v="remove"+o,o="Child",d="first"+o,g="append"+o,h="remove"+o,p="parentNode",w="children",b="childNodes",$="insertBefore",x="nodeName",o="Attribute",m="get"+o,y="set"+o,k="remove"+o,M="replace",z="value",C="length",S="indexOf",N="substring",R="push",E="preventDefault",B="click",A="focus",L="blur",_="select",T="keydown",j="paste",H="error",O="test",I="contenteditable",D="readonly",U="spellcheck",q="placeholder",F="getSelection",K="getRangeAt",X="rangeCount",G="addRange",J="removeAllRanges",P=r+"Range",o="Contents",Q="clone"+o,V="delete"+o,W=_+"Node",Y=W+o,Z="insertNode",ee="cloneRange",ne="collapse",te="setStart",ie="setEnd",re=te+"Before",fe=te+"After",ue=ie+"Before",oe=ie+"After",se=!0,ce=!1,ae=null,le="div",o="Key",ve="ctrl"+o,de="shift"+o,he="keyCode",pe=setTimeout;!function(e){e.version="1.1.4",e[i]={},e.each=function(n,t){return pe(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(o,l){function an(){return we=e[F]&&e[F]()||{},we[X]&&we||ae}function ln(e){return we=an(),we&&we[K](e||0)||ae}function vn(e,n,t){if(e){if(we=an()){var r,f,i=$e(le);for(r=0,f=we[X];f>r;++r)i[g](we[K](r)[Q]());return e=Se(i[s].split(Oe)),e=ke(n)||n?v.f(e):e,ke(t)||t?e:e[M](ze(Xe,"g"),"\n\n")[M](ze(Ge,"g"),"")}return""}return an()+""}function dn(e,n){var r,f,u,o,t=vn(1,0,0),i=Ee(t);if(i&&i[0][C]&&(be=ln(),be[V](),be[Z](i[1])),i=i[0],e){for(u=0,o=i[C];o>u;++u)if(r=i[u],xe(r[x])===e)return r;return(ke(n)||n)&&(u=wn(),f=hn(Oe+t),f=f&&f[0]&&f[0][p],f&&xe(f[x])===e&&f!==Te)?(f[s]=Se(f[s].split(Oe)),t&&t!==f[s]?bn(u):xn([f]),f):ae}return i[C]?i:ae}function gn(e){return(be=ln())&&(e=1===e?ce:0===e?se:e,be[ne](e)),be}function hn(e,n){if(Ye[A]){var t=Ee(e);return(we=an())&&(be=ln(),be[V](),be[Z](t[1]),0===n?gn(1):1===n&&(hn(e,se),gn(0)),we[J](),we[G](be)),t[0]}return ae}function pn(n){try{var t=dn("a"),i=Ce(vn(1,1,0),"a");n=Ce(n[M](/^\s*javascript:/i,""));var f=n[0],u=e.location.hostname;return f=-1!=="/?&#"[S](f)||-1===n[S]("/"),!u||0!==n[S]("//"+u)&&-1===n[S]("://"+u)||(f=1),i||(hn(n,se),i=n),n?(t?t[y]("href",n):t=hn('<a href="'+n+'">'+i+"</a>",se)[0],f?(t[k]("rel"),t[k]("target")):(t[y]("rel","nofollow"),t[y]("target","_blank"))):(t&&(i=t[s],t[p][h](t)),t=hn(i,se)[0]),t}catch(o){}return ae}function wn(){var e,n,t;return(e=ln())?(n=e[ee](),n[Y](Te),n[ie](e.startContainer,e.startOffset),t=(n+"")[C],[t,t+(e+"")[C]]):ae}function bn(t){if(t){var r,u,s,c,a,l,i=n[P](),f=0,o=[Te];for(i[te](Te,0),i[ne](se);!l&&(c=o.pop());)if(ye(c))u=f+c[C],!a&&t[0]>=f&&t[0]<=u&&(i[te](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=u&&(i[ie](c,t[1]-f),l=1),f=u;else for(s=c[b][C];s--;)o[R](c[b][s]);r=e[F](),r[J](),r[G](i)}}function $n(){return Ee(vn(1,1,0))[0]}function xn(e,n){n=ke(n)||!n;var t=e[0],i=e[e[C]-1];return we=an(),be=ln(),1===e[C]?be[n?Y:W](t):(be[n?fe:re](t),be[n?ue:oe](i)),we[J](),we[G](be),e}function mn(e,n,t){if(Ye[A]){ke(n)&&(n=-1);var u,a,l,i=dn(e),r=vn(1,0,0),f=[];if(0===n||-1===n&&i){if(i){u=i[s],i[p][h](i);var v=Ce(r,e),d=Ce(u,e);if(-1!==d[S](v)&&v[C]<d[C])i=ze("<"+e+"(\\s[^<>]*?)?>","i").exec(i[c]),i=i&&i[1]||"",r=Ee([u[N](0,u[S](v)),v,u[N](u[S](v)+v[C])])[0],r[0]&&hn("<"+e+i+">"+(r[0][c]||r[0])+"</"+e+">",0),r[2]&&hn("<"+e+i+">"+(r[2][c]||r[2])+"</"+e+">",1),f=hn(r[1][c]||r[1],se);else{if(f=Ee(r),u=$e(le),f&&f[2]&&(l=f[2][C]))for(a=0;l>a;++a)f[2][a]===e?u[s]+=f[0][a][s]:u[g](f[0][a]);f=hn(u[s],se)}}}else(1===n||-1===n&&!i)&&(i||(r=r&&r[M](ze("(\\n|"+Fe+"){2,}","gi"),"</"+e+">"+He+He+"<"+e+">"),f=hn("<"+e+">"+(r||t||"")+"</"+e+">",se)));return f[0]||ae}return ae}function yn(e,n){A in e&&(e.selectionStart=e.selectionEnd=ke(n)?e[z][C]:n,e[A]())}function kn(e,n){var t=e[a];return ze("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[O](t)?e:(e[a]=Ce(t+" "+n),e)}function Mn(e,n){var t=Ce(e[a][M](ze("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[a]=t:e[k]("class"),e}function zn(e,n,t,i){function u(e){i.apply(this,[e,v,r]),Sn(),Te[A](),Me(nn)&&nn(e,v,Te),e[E]()}var r=kn($e("a"),n),f=t[1]||t[0];return 0===f[S]("svg:")&&(f=me+f.slice(4)+Be),r[s]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Ne(r,"touchstart",u),Ne(r,"mousedown",u)),[r,i]}function Cn(){Te[s]=v.f(o[z])[M](ze(Xe,"gi"),He+He)[M](ze(Ge,"gi"),"")}function Sn(){var e=v.f(Te[s]);Ae.tidy&&(e=e[M](ze(Xe,"gi"),"</p>\n\n<p$1>")[M](ze(De,"gi"),He+"\n")),o[z]=e}function Nn(e){return xe(e.key||String.fromCharCode(e[he]))}function Bn(e){var n=e[ve],t=e[de],i=e[he],r=Nn(e);n&&t&&("x"===r||88===i)&&en?(cn.x[1](),e[E]()):t||"enter"!==r&&13!==i||Me(Ze)&&Ze(e,v,o),Me(nn)&&nn(e,v,o),pe(function(){Cn(),bn(v.$[1])},1)}function An(){if(Le[p])return v;kn(o,tn+"-source"),Ne(o,T,Bn),Ve=Ae.tools;for(We in Ve)if(We=Ve[We],cn[We]){if("x"===We&&!en)continue;_e[g](cn[We][0])}Le[g](Te),Rn&&"p"===xe(Rn[x])&&(Rn[$](En,o),Rn[p][$](o,Rn),Rn[p][h](Rn)),o[p][$](Le,o),Le[g](o),Le[g](_e),kn(je,tn+"-d"),je[s]='<input type="text">',v.d.x();var e=je[w][0];return e[y](U,ce),Ne(e,B,function(){Ye[H]=ce,Mn(Le,H)}),Ne(e,T,function(e){var n=this,t=e[ve],i=e[de],r=e[he],f=Nn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[z][C]||"backspace"!==f&&8!==r)||(v.d.x(1,1),Qe=0,e[E]()):(v.d.x(1,1),Qe&&Qe(e,v,n),Qe=0,n[z]="",Me(nn)&&nn(e,v,Te),e[E]())}),Le[g](je),v}function Ln(){return Le[p]?(Rn&&(Le[p][$](Rn,Le),Rn[$](o,En),Rn[h](En)),o[f][u]="",o[m](f)||o[k](f),Mn(o,tn+"-source"),Re(o,T,Bn),Le[p][h](Le),v):v}var Qe,Ve,We,v=this,d="⌘",ge="⇧",me='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Be='"></path></svg>',Ae={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",me+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Be,d+"+B"],i:["Italic",me+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Be,d+"+I"],u:["Underline",me+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Be,d+"+U"],a:["Link",me+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Be,d+"+L"],x:["Source",me+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Be,d+"+"+ge+"+X"]},tidy:1,enter:1,x:1,update:0},Le=$e(le),_e=$e(le),Te=$e(le),je=$e(le),He="<br>",Oe=e[t].x,Ie="(\\s[^<>]*?)?",De="<br"+Ie+"\\s*\\/?>",Ue="<p"+Ie+">",qe="<\\/p>",Ie="\\s*",Fe=Ie+"(?:"+De+")"+Ie,Ke="^"+Ie+Ue+"(?:"+Fe+")*"+Ie+"|"+Ie+"(?:"+Fe+")*"+qe+Ie+"$",Xe=Ie+"(?:"+Fe+")*"+qe+Ie+Ue+"(?:"+Fe+")*"+Ie,Ge=Ie+"(?:"+Ue+"(?:"+Fe+")*|(?:"+Fe+")*"+qe+")"+Ie,Je=Ie+Ue+"(?:"+Fe+")*"+Ie+"(?:"+Fe+")*"+qe+Ie,Pe=Ie+Ue+"(?:"+Fe+")*(?:[\\s\\S]*?)(?:"+Fe+")*"+qe+Ie;v.is={view:se,source:ce,d:ce,e:function(e){var n=an()[A+"Node"];if(!n)return ae;if(ye(n)&&(n=n[p]),n===Te){if((n=vn(1,1,0))&&-1!==xe(n)[S]("</"+e+">"))return hn(n,se)[0]}else{if(n[x]&&xe(n[x])===e)return n;for(;n&&n!==Te;){if(n[x]&&xe(n[x])===e)return n;n=n[p]}}return ae},focus:ce,blur:se,error:ce},l=l||{};for(We in Ae)ke(l[We])||(Ae[We]=l[We]);var Ye=v.is,Ze=Ae.enter,en=Ae.x,nn=Ae.update,tn=Ae.classes[0],rn=Ae.text||{},fn=Se(Ae.tags,"|"),un=Se(Ae.attributes,"|"),on=Se(Ae.blocks,"|"),sn=0,cn={b:function(){mn("strong")},i:function(){mn("em")},u:function(){mn("u")},a:function(e){var t,i,n=Ce(vn(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[O](n)?(dn("a")?mn("a",0):pn(n),Sn()):Ye.d?v.d.x(1):((t=dn("a"))&&(i=t[m]("href")),Ie="http://",v.d(Ie,(i?i[M](/\/+$/,""):Ie+xe(n))||"",function(e,n,t){pn(t[z]),Sn()}),pe(function(){i&&je[w][0][_]()},2))},x:function(e){if(en){var n=Te.offsetHeight;n&&(o[f][u]=n+"px"),sn?(v.$[0]=wn(),kn(Le,"view"),Mn(Le,"source"),Te[A](),bn(v.$[1]),sn=0):(v.$[1]=wn(),kn(Le,"source"),Mn(Le,"view"),o[A](),bn(v.$[0]),sn=1),Ye.view=!sn,Ye.source=!!sn,v.d.x(0,1),Me(en)&&en(e,v,sn||0)}}};v.$=[ae,ae],v.$$=function(e,n){var t=[an(),ln(n)];return ke(e)?t:t[e]},v.d=function(e,n,t){var i=je[w][0];return i[q]=e,i[z]=n,pe(function(){yn(i)},1),Qe=t,v.d.v(1),v},v.d.x=function(e,n){var t=je[w][0],i=t[z];return i&&!n?(kn(Le,H),Ye[H]=se,Ye.d=se,pe(function(){Ye[A]=ce,Ye[L]=se,t[A](),t[_]()},1)):(Mn(Le,"d"),Mn(Le,H),Ye.d=ce),Ye[A]=se,Ye[L]=ce,e&&(v[A](),bn(v.$[1])),v},v.d.v=function(e){return kn(Le,"d"),Mn(Le,H),Ye[H]=ce,Ye.d=se,v.$[1]=e?wn():ae,v},e[t][i][o.id||o.name||Object.keys(e[t][i])[C]]=v,v.t=function(e,n,t,i){var r=zn(n[0]+(n[2]?" ("+n[2]+")":""),tn+"-t:"+e,n,t);return ke(i)?i=ae:0>i&&(i=_e[w][C]+i),_e[$](r[0],_e[w][i]||ae),v.t[e]=r[1],v.t[e].e=r[0]};for(We in cn)v.t[We]=cn[We],cn[We]=zn(rn[We][0]+(rn[We][2]?" ("+rn[We][2]+")":""),tn+"-t:"+We,rn[We],cn[We]),v.t[We].e=cn[We][0];v.f=function(e){return e=Se(e[M](/\r/g,"").split(Oe)),e=e[M](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[M](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[M](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[M](/ /g,"&nbsp;")+"</code>"}),e=e[M](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=xe(t),!ze("^("+fn+"|"+on+")$")[O](t))return"";(i=i||"")&&(i=i[M](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return ze("^("+un+")$")[O](n)?e:""}));var r=/^(h[1-6]|th)$/[O](t),f=/^((fig)?caption)$/[O](t),u=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+u+">"+(r&&n?He+He:""):"i"===t||"em"===t||f?"<"+n+"em"+u+">":ze("^("+fn+")$")[O](t)?"<"+n+t+u+">":ze("^("+on+")$")[O](t)?He+He:""}),e=e[M](ze(Xe,"gi"),"</p><p$1>")[M](ze(Fe,"gi"),He)[M](/\n/g,He)[M](ze("(?:"+Fe+"){3,}","gi"),He+He)[M](ze("^(?:"+Fe+")+|(?:"+Fe+")+$","gi"),"")[M](ze("(?:"+Fe+"){2,}","gi"),"</p><p>")[M](ze(Je,"gi"),""),e=e&&!ze("^"+Pe+"$","gi")[O](e)?"<p>"+e+"</p>":e,e=Ee(e),e[3]||""},Cn(),Sn(),kn(Le,tn+" view"),o[y](U,ce),kn(_e,tn+"-tool"),kn(Te,tn+"-view"),Ze&&kn(Le,"expand"),Te[y](I,se),Te[y](U,ce),Te[y](q,o[q]||""),Ne(Te,A,function(){Ye[A]=se,Ye[L]=ce,kn(Le,A),Ye[H]&&o.required&&""!==o[z]&&(Ye[H]=ce,Mn(Le,H))}),Ne(Te,L,function(){Ye[A]=ce,Ye[L]=se,Sn(),Mn(Le,A),!Ye[H]&&o.required&&""===o[z]&&(Ye[H]=se,kn(Le,H))}),Ne(Te,j,function(){pe(function(){Cn();var e=Te[s];Te[s]="",hn(e,0)},1)}),Ne(Te,T,function(e){var u,n=e[ve],t=e[de],i=e[he],r=Le,f=Nn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&en)cn.x[1](),e[E]();else if(!t&&("enter"===f||13===i))if(Ze&&(we=an(),be=ln(),hn(He,0),hn(Oe,1),e[E]()),Ze)Me(Ze)&&Ze(e,v,Te);else{for(;r=r[p];)if("form"===xe(r[x])){u=r;break}u&&(u.submit(),e[E]())}}else cn.a[1](),e[E]();else cn.u[1](),e[E]();else cn.i[1](),e[E]();else cn.b[1](),e[E]();Me(nn)&&nn(e,v,Te),pe(function(){var e=Te[s][M](ze(Oe,"g"),"");e&&e!==He||(Te[s]=""),Sn()},1)});var Rn=o[p],En=$e("a");return An(),v.config=Ae,v.container=Le,v.view=Te,v.source=v.target=o,v.tool=_e,v.dialog=je,v.c=gn,v.e=dn,v.g=Ee,v.i=hn,v.m=xn,v.n=$n,v.r=bn,v.s=wn,v.v=vn,v.w=mn,v[r]=An,v.destroy=Ln,v[A]=function(e){if(Ye.view){var t=Te[s];Te[A](),v.$[1]&&bn(v.$[1]),Ye[A]=se,Ye[L]=ce,0===e?(Te[s]="",hn(t,1)):1===e?(Te[s]="",hn(t,0)):e===se&&(be=n[P](),be[Y](Te),we=an(),we[J](),we[G](be))}else Ye.source&&(o[A](),0===e?yn(o,0):1===e?yn(o,o[z][C]):e===se&&o[_]());return v},v[L]=function(){return Ye.view?(Ye[A]=ce,Ye[L]=se,Te[L]()):Ye.source&&o[L](),v},v.set=function(e,n){return e=v.f(e),(Ye.view||1===n)&&(e=e[M](ze(Ke,"gi"),"")[M](ze(Xe,"gi"),He+He)),ke(n)?Ye.view?(Te[s]=e,Sn()):Ye.source?(o[z]=e,Cn()):Ye.d&&(je[w][0][z]=e):0===n?(o[z]=e,Cn()):1===n&&(Te[s]=e,Sn()),v},v.get=function(e,n){if(ke(n)){var t;return t=Ye.source?o[z]:Ye.d?je[w][0][z]:o[z],t?t:e}return 0===n?o[z]||e:1===n?Te[s]||e:void 0},v.disable=function(){return Te[k](I),o[y](D,se),v},v.enable=function(){return Te[y](I,se),o[k](D),we},v})}(window,document,"RTE");