/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.2.1
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(n,t,e){function r(n){return t[m+"Element"](n)}function i(n){return n.toLowerCase()}function o(n){return"string"==typeof n}function u(n){return 3===n.nodeType}function f(n){return void 0===n}function c(n){return"function"==typeof n}function s(n,t){return RegExp(n,t)}function a(n,t){return t=t||"[\\w-:]+",n[O](s("<\\/"+t+">|<"+t+"(\\s[^<>]*?)?>","gi"),"")[O](/ +/g," ")[O](/^\s*|\s*$/g,"")}function l(n,t){return n.join(t||"")}function v(n,t,e){return n[C](t,e,Nt)}function d(n,t,e){return n[S](t,e)}function g(n){var e,u=r(Bt),f=t[m+"DocumentFragment"](),c=[],s=[],a="";if(o(n)){for(u[k]=n;e=u[N];)s[K](i(e[j]||"")),c[K](f[R](e));return[c,f,s,n]}for(s in n)(e=n[s])&&(o(e)?(a+=e,u[k]=e,e=u[N]):a+=e[z],c[K](i(e[j]||"")),f[R](e));return[n,f,c,a]}var h,p,b="__instance__",x="lot",m="create",w="style",$="minHeight",y="HTML",k="inner"+y,z="outer"+y,M="className",y="EventListener",C="add"+y,S="remove"+y,y="Child",N="first"+y,R="append"+y,B="remove"+y,E="parentNode",A="children",L="childNodes",_="insertBefore",j="nodeName",y="Attribute",T="get"+y,q="set"+y,H="remove"+y,O="replace",D="value",I="length",U="indexOf",F="substring",K="push",X="preventDefault",G="click",J="focus",P="blur",Q="select",V="keydown",W="paste",Y="view",Z="source",nt="dialog",tt="error",et="tool",rt="test",it="contenteditable",ot="readonly",ut="spellcheck",ft="placeholder",ct="getSelection",st="getRangeAt",at="rangeCount",lt="addRange",vt="removeAllRanges",dt=m+"Range",y="Contents",gt="clone"+y,ht="delete"+y,pt=Q+"Node",bt=pt+y,xt="insertNode",mt="cloneRange",wt="collapse",$t="setStart",yt="setEnd",kt=$t+"Before",zt=$t+"After",Mt=yt+"Before",Ct=yt+"After",St=!0,Nt=!1,Rt=null,Bt="div",y="Key",Et="ctrl"+y,At="shift"+y,Lt="keyCode",_t=setTimeout;!function(n){n.version="1.2.1",n[b]={},n.each=function(t,e){return _t(function(){var e,r=n[b];for(e in r)t(r[e],e,r)},0===e?0:e||1),n},n.x="​"}(n[e]=function(o,y){function C(){return h=n[ct]&&n[ct]()||{},h[at]&&h||Rt}function S(n){return h=C(),h&&h[st](n||0)||Rt}function N(n,t,e){if(n){if(h=C()){var i,o,u=r(Bt);for(i=0,o=h[at];o>i;++i)u[R](h[st](i)[gt]());return n=l(u[k].split(pe)),n=f(t)||t?ie.f(n):n,f(e)||e?n:n[O](s(ke,"g"),"\n\n")[O](s(ze,"g"),"")}return""}return C()+""}function jt(n,t){var e,r,o,u,c=N(1,0,0),s=g(c);if(s&&s[0][I]&&(p=S(),p[ht](),p[xt](s[1])),s=s[0],n){for(o=0,u=s[I];u>o;++o)if(e=s[o],i(e[j])===n)return e;return(f(t)||t)&&(o=Ot(),r=qt(pe+c),r=r&&r[0]&&r[0][E],r&&i(r[j])===n&&r!==ve)?(r[k]=l(r[k].split(pe)),c&&c!==r[k]?Dt(o):Ut([r]),r):Rt}return s[I]?s:Rt}function Tt(n){return(p=S())&&(n=1===n?Nt:0===n?St:n,p[wt](n)),p}function qt(n,t){if(Se[J]){var e=g(n);return(h=C())&&(p=S(),p[ht](),p[xt](e[1]),0===t?Tt(1):1===t&&(qt(n,St),Tt(0)),h[vt](),h[lt](p)),e[0]}return Rt}function Ht(t){try{var e=jt("a"),r=a(N(1,1,0),"a");t=a(t[O](/^\s*javascript:/i,""));var i=t[0],o=n.location.hostname;return i=-1!=="/?&#"[U](i)||-1===t[U]("/"),!o||0!==t[U]("//"+o)&&-1===t[U]("://"+o)||(i=1),r||(qt(t,St),r=t),t?(e?e[q]("href",t):e=qt('<a href="'+t+'">'+r+"</a>",St)[0],i?(e[H]("rel"),e[H]("target")):(e[q]("rel","nofollow"),e[q]("target","_blank"))):(e&&(r=e[k],e[E][B](e)),e=qt(r,St)[0]),e}catch(u){}return Rt}function Ot(){var n,t,e;return(n=S())?(t=n[mt](),t[bt](ve),t[yt](n.startContainer,n.startOffset),e=(t+"")[I],e=[e,e+(n+"")[I]],e[1]-e[0]===1?[e[0],e[0]]:e):Rt}function Dt(e){if(e){var r,i,o,f,c,s,a=t[dt](),l=0,v=[ve];for(a[$t](ve,0),a[wt](St);!s&&(f=v.pop());)if(u(f))i=l+f[I],c||e[0]<l||e[0]>i||(a[$t](f,e[0]-l),c=1),!c||e[1]<l||e[1]>i||(a[yt](f,e[1]-l),s=1),l=i;else for(o=f[L][I];o--;)v[K](f[L][o]);r=n[ct](),r[vt](),r[lt](a)}}function It(){return g(N(1,1,0))[0]}function Ut(n,t){t=f(t)||!t;var e=n[0],r=n[n[I]-1];return h=C(),p=S(),1===n[I]?p[t?bt:pt](e):(p[t?zt:kt](e),p[t?Mt:Ct](r)),h[vt](),h[lt](p),n}function Ft(n,t){if(Se[J]){f(t)&&(t=-1);var e,i,o,u=jt(n),c=N(1,0,0),l=[];if(0===t||-1===t&&u){if(u){e=u[k],u[E][B](u);var v=a(c,n),d=a(e,n);if(-1!==d[U](v)&&v[I]<d[I])u=s("<"+n+"(\\s[^<>]*?)?>","i").exec(u[z]),u=u&&u[1]||"",c=g([e[F](0,e[U](v)),v,e[F](e[U](v)+v[I])])[0],c[0]&&qt("<"+n+u+">"+(c[0][z]||c[0])+"</"+n+">",0),c[2]&&qt("<"+n+u+">"+(c[2][z]||c[2])+"</"+n+">",1),l=qt(c[1][z]||c[1],St);else{if(l=g(c),e=r(Bt),l&&l[2]&&(o=l[2][I]))for(i=0;o>i;++i)l[2][i]===n?e[k]+=l[0][i][k]:e[R](l[0][i]);l=qt(e[k],St)}}}else(1===t||-1===t&&!u)&&(u||(c=c&&c[O](s("(\\n|"+$e+"){2,}","gi"),"</"+n+">"+he+he+"<"+n+">")),l=qt("<"+n+">"+(c||"")+"</"+n+">",St));return l[0]||Rt}return Rt}function Kt(n,t){J in n&&(n.selectionStart=n.selectionEnd=f(t)?n[D][I]:t,n[J]())}function Xt(n,t){var e=n[M];return s("(^|\\s)\\s*"+t+"\\s*(\\s|$)")[rt](e)?n:(n[M]=a(e+" "+t),n)}function Gt(n,t){var e=a(n[M][O](s("(^|\\s)\\s*"+t+"\\s*(\\s|$)","g"),"$1$2"));return e?n[M]=e:n[H]("class"),n}function Jt(n,t,e,i){function o(n){i.apply(this,[n,ie,u]),Qt(),ve[J](),c(Be)&&Be(n,ie,ve),n[X]()}var u=Xt(r("a"),t),f=e[1]||e[0];return 0===f[U]("svg:")&&(f=fe+f.slice(4)+ce),u[k]="<span>"+f+"</span>",u.title=n,u.href="javascript:;",i&&(v(u,"touchstart",o),v(u,"mousedown",o)),[u,i]}function Pt(){ve[k]=ie.f(de[D])[O](s(ke,"gi"),he+he)[O](s(ze,"gi"),"")}function Qt(){var n=ie.f(ve[k]);se.tidy&&(n=n[O](s(ke,"gi"),"</p>\n\n<p$1>")[O](s(xe,"gi"),he+"\n")),de[D]=n}function Vt(n){return i(n.key||String.fromCharCode(n[Lt]))}function Wt(n){var t=n[Et],e=n[At],r=n[Lt],i=Vt(n);t&&e&&("x"===i||88===r)&&Re?(qe.x[1](),n[X]()):e||"enter"!==i&&13!==r||c(Ne)&&Ne(n,ie,de),c(Be)&&Be(n,ie,de),_t(Pt,2)}function Yt(){Se[Y]&&ve[J]()}function Zt(){if(ae[E])return ie;Xt(de,Ee+"-"+Z),v(de,V,Wt),v(de,J,Yt),ee=se.tools;for(re in ee)if(re=ee[re],qe[re]){if("x"===re&&!Re)continue;le[R](qe[re][0])}ae[R](ve),He&&"p"===i(He[j])&&(He[_](Oe,de),He[E][_](de,He),He[E][B](He)),de[E][_](ae,de),ae[R](de),ae[R](le),Xt(ge,Ee+"-"+nt),ge[k]='<input type="text">',ie.d.x();var n=ge[A][0];return n[q](ut,Nt),v(n,G,function(){Se[tt]=Nt,Gt(ae,tt)}),v(n,V,function(n){var t=this,e=n[Et],r=n[At],i=n[Lt],o=Vt(n);e||r||"enter"!==o&&13!==i?r||"escape"!==o&&27!==i&&(t[D][I]||"backspace"!==o&&8!==i)||(ie.d.x(1,1),te=0,n[X]()):(ie.d.x(1,1),te&&te(n,ie,t),te=0,t[D]="",c(Be)&&Be(n,ie,ve),n[X]())}),ae[R](ge),Pt(),Qt(),ie}function ne(){return ae[E]?(He&&(ae[E][_](He,ae),He[_](de,Oe),He[B](Oe)),de[w][$]="",de[T](w)||de[H](w),Gt(de,Ee+"-"+Z),d(de,V,Wt),d(de,J,Yt),ae[E][B](ae),Pt(),Qt(),ie):ie}var te,ee,re,ie=this,oe="⌘",ue="⇧",fe='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',ce='"></path></svg>',se={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",fe+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+ce,oe+"+B"],i:["Italic",fe+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+ce,oe+"+I"],u:["Underline",fe+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+ce,oe+"+U"],a:["Link",fe+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+ce,oe+"+L"],x:["Source",fe+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+ce,oe+"+"+ue+"+X"]},tidy:1,enter:1,x:1,update:0},ae=r(Bt),le=r(Bt),ve=r(Bt),de=o,ge=r(Bt),he="<br>",pe=n[e].x,be="(\\s[^<>]*?)?",xe="<br"+be+"\\s*\\/?>",me="<p"+be+">",we="<\\/p>",be="\\s*",$e=be+"(?:"+xe+")"+be,ye="^"+be+me+"(?:"+$e+")*"+be+"|"+be+"(?:"+$e+")*"+we+be+"$",ke=be+"(?:"+$e+")*"+we+be+me+"(?:"+$e+")*"+be,ze=be+"(?:"+me+"(?:"+$e+")*|(?:"+$e+")*"+we+")"+be,Me=be+me+"(?:"+$e+")*"+be+"(?:"+$e+")*"+we+be,Ce=be+me+"(?:"+$e+")*(?:[\\s\\S]*?)(?:"+$e+")*"+we+be;ie.is={view:St,source:Nt,dialog:Nt,e:function(n){var t=C()[J+"Node"];if(!t)return Rt;if(u(t)&&(t=t[E]),t===ve){if((t=N(1,1,0))&&-1!==i(t)[U]("</"+n+">"))return qt(t,St)[0]}else{if(t[j]&&i(t[j])===n)return t;for(;t&&t!==ve;){if(t[j]&&i(t[j])===n)return t;t=t[E]}}return Rt},focus:Nt,blur:St,error:Nt},y=y||{};for(re in se)f(y[re])||(se[re]=y[re]);var Se=ie.is,Ne=se.enter,Re=se.x,Be=se.update,Ee=se.classes[0],Ae=se.text||{},Le=l(se.tags,"|"),_e=l(se.attributes,"|"),je=l(se.blocks,"|"),Te=0,qe={b:function(){Ft("strong")},i:function(){Ft("em")},u:function(){Ft("u")},a:function(){var n,t,e=a(N(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[rt](e)?(jt("a")?Ft("a",0):Ht(e),Qt()):Se[nt]?ie.d.x(1):((n=jt("a"))&&(t=n[T]("href")),be="http://",ie.d(be,(t?t[O](/\/+$/,""):be+i(e))||"",function(n,t,e){Ht(e[D]),Qt()}),_t(function(){t&&ge[A][0][Q]()},2))},x:function(n){if(Re){var t=ve.offsetHeight;t&&(de[w][$]=t+"px"),Te?(ie[x][0]=Ot(),Xt(ae,Y),Gt(ae,Z),ve[J](),Dt(ie[x][1]),Te=0):(ie[x][1]=Ot(),Xt(ae,Z),Gt(ae,Y),de[J](),Dt(ie[x][0]),Te=1),Se[Y]=!Te,Se[Z]=!!Te,ie.d.x(0,1),c(Re)&&Re(n,ie,Te||0)}}};ie.$$=function(n,t){var e=[C(),S(t)];return f(n)?e:e[n]},ie[x]=[Rt,Rt],ie.d=function(n,t,e){var r=ge[A][0];return r[ft]=n,r[D]=t,_t(function(){Kt(r)},1),te=e,ie.d.v(1),ie},ie.d.x=function(n,t){var e=ge[A][0],r=e[D];return r&&!t?(Xt(ae,tt),Se[tt]=St,Se[nt]=St,_t(function(){Se[J]=Nt,Se[P]=St,e[J](),e[Q]()},1)):(Gt(ae,nt),Gt(ae,tt),Se[nt]=Nt),Se[J]=St,Se[P]=Nt,n&&(ie[J](),Dt(ie[x][1])),ie},ie.d.v=function(n){return Xt(ae,nt),Gt(ae,tt),Se[tt]=Nt,Se[nt]=St,n&&(ie[x][1]=Ot()),ie},n[e][b][de.id||de.name||Object.keys(n[e][b])[I]]=ie,ie.t=function(n,t,e,r){var i=Jt(t[0]+(t[2]?" ("+t[2]+")":""),Ee+"-t:"+n,t,e);return f(r)?r=Rt:0>r&&(r=le[A][I]+r),le[_](i[0],le[A][r]||Rt),ie.t[n]=i[1],ie.t[n].e=i[0]};for(re in qe)ie.t[re]=qe[re],qe[re]=Jt(Ae[re][0]+(Ae[re][2]?" ("+Ae[re][2]+")":""),Ee+"-t:"+re,Ae[re],qe[re]),ie.t[re].e=qe[re][0];ie.f=function(n){return n=l(n[O](/\r/g,"").split(pe)),n=n[O](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(n,t,e){return t===e?"":n}),n=n[O](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(n,t,e){return"<code"+(t||"")+">"+e[O](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[O](/ /g,"&nbsp;")+"</code>"}),n=n[O](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(n,t,e,r){if(e=i(e),!s("^("+Le+"|"+je+")$")[rt](e))return"";(r=r||"")&&(r=r[O](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(n,t){return s("^("+_e+")$")[rt](t)?n:""}));var o=/^(h[1-6]|th)$/[rt](e),u=/^((fig)?caption)$/[rt](e),f=t?"":r;return"b"===e||"strong"===e||o?"<"+t+"strong"+f+">"+(o&&t?he+he:""):"i"===e||"em"===e||u?"<"+t+"em"+f+">":s("^("+Le+")$")[rt](e)?"<"+t+e+f+">":s("^("+je+")$")[rt](e)?he+he:""}),n=n[O](s(ke,"gi"),"</p><p$1>")[O](s($e,"gi"),he)[O](/\n/g,he)[O](s("(?:"+$e+"){3,}","gi"),he+he)[O](s("^(?:"+$e+")+|(?:"+$e+")+$","gi"),"")[O](s("(?:"+$e+"){2,}","gi"),"</p><p>")[O](s(Me,"gi"),""),n=n&&!s("^"+Ce+"$","gi")[rt](n)?"<p>"+n+"</p>":n,n=g(n),n[3]||""},Pt(),Qt(),Xt(ae,Ee+" "+Y),de[q](ut,Nt),Xt(le,Ee+"-"+et),Xt(ve,Ee+"-"+Y),Ne&&Xt(ae,"expand"),ve[q](it,St),ve[q](ut,Nt),ve[q](ft,de[ft]||""),v(ve,J,function(){Se[J]=St,Se[P]=Nt,Xt(ae,J),de.required&&(""===de[D]||(Se[tt]=Nt,Gt(ae,tt)))}),v(ve,P,function(){Se[J]=Nt,Se[P]=St,Qt(),Gt(ae,J),de.required&&(""===de[D]?(Se[tt]=St,Xt(ae,tt)):(Se[tt]=Nt,Gt(ae,tt)))}),v(ve,W,function(){_t(function(){var n=Ot();Qt(),Pt(),ve[P](),Dt(n)},1)}),v(ve,V,function(n){var t,e=n[Et],r=n[At],o=n[Lt],u=ae,f=Vt(n);if(!e||r||"b"!==f&&66!==o)if(!e||r||"i"!==f&&73!==o)if(!e||r||"u"!==f&&85!==o)if(!e||r||"l"!==f&&76!==o){if(e&&r&&("x"===f||88===o)&&Re)qe.x[1](),n[X]();else if(!r&&("enter"===f||13===o))if(Ne&&(h=C(),p=S(),qt(he,0),qt(pe,1),n[X]()),Ne)c(Ne)&&Ne(n,ie,ve);else{for(Qt();u=u[E];)if("form"===i(u[j])){t=u;break}t&&(t.submit(),n[X]())}}else qe.a[1](),n[X]();else qe.u[1](),n[X]();else qe.i[1](),n[X]();else qe.b[1](),n[X]();c(Be)&&Be(n,ie,ve),_t(function(){var n=ve[k][O](s(pe,"g"),"");n&&n!==he||(ve[k]="")},0)});var He=de[E],Oe=r("a");return Zt(),ie.config=se,ie.container=ae,ie.view=ve,ie.source=ie.target=de,ie.tool=le,ie.dialog=ge,ie.c=Tt,ie.e=jt,ie.g=g,ie.i=qt,ie.m=Ut,ie.n=It,ie.r=Dt,ie.s=Ot,ie.v=N,ie.w=Ft,ie[m]=Zt,ie.destroy=ne,ie[J]=function(n){if(Se[Y]){var e=ve[k];ve[J](),ie[x][1]&&Dt(ie[x][1]),Se[J]=St,Se[P]=Nt,0===n?(ve[k]="",qt(e,1)):1===n?(ve[k]="",qt(e,0)):n===St&&(p=t[dt](),p[bt](ve),h=C(),h[vt](),h[lt](p))}else Se[Z]&&(de[J](),0===n?Kt(de,0):1===n?Kt(de,de[D][I]):n===St&&de[Q]());return ie},ie[P]=function(){return Se[Y]?(Se[J]=Nt,Se[P]=St,ve[P]()):Se[Z]&&de[P](),ie},ie.set=function(n,t){return n=ie.f(n),(Se[Y]||1===t)&&(n=n[O](s(ye,"gi"),"")[O](s(ke,"gi"),he+he)),f(t)?Se[Y]?(ve[k]=n,Qt()):Se[Z]?(de[D]=n,Pt()):Se[nt]&&(ge[A][0][D]=n):0===t?(de[D]=n,Pt()):1===t&&(ve[k]=n,Qt()),ie},ie.get=function(n,t){if(f(t)){var e;return e=Se[Z]?de[D]:Se[nt]?ge[A][0][D]:de[D],e?e:n}return 0===t?de[D]||n:1===t?ve[k]||n:void 0},ie.disable=function(){return ve[H](it),de[q](ot,St),ie},ie.enable=function(){return ve[q](it,St),de[H](ot),h},ie})}(window,document,"RTE");